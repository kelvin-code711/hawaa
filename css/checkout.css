/* ===========================
   checkout.css â€” FULL FILE WITH PHONEPE STYLES
   =========================== */

:root{
  --cd-font:"Outfit",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans",
             "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji",sans-serif;
  --cd-bg:#ffffff;
  --cd-text:#0f172a;           /* slate-900 */
  --cd-muted:#64748b;          /* slate-500 */
  --cd-border:#e2e8f0;         /* slate-200 */
  --cd-accent:#2563eb;         /* blue-600 */
  --cd-accent-ink:#ffffff;
  --cd-danger:#ef4444;
  --cd-success:#16a34a;
  --cd-shadow:0 10px 30px rgba(2,6,23,.18),0 4px 10px rgba(2,6,23,.08);

  --cd-drawer-w:680px;

  --cd-radius-xl:20px;
  --cd-radius-lg:14px;
  --cd-radius-md:10px;

  --cd-pad:20px;
  --cd-gap:14px;
  --cd-line:1px solid var(--cd-border);

  /* Quantity chip palette */
  --cd-qty-bg:#e9f5ee;
  --cd-qty-br:#d5e9da;
  --cd-qty-ink:#33463a;

  /* PhonePe colors */
  --phonepe-purple:#5f259f;
  --phonepe-light:#f8f5ff;
}

/* Global font enforcement */
html,body{font-family:var(--cd-font)}
*,*::before,*::after{font-family:inherit}

/* ---------- Base ---------- */
*{box-sizing:border-box}
html,body{height:100%}
html,body{background:transparent!important;background-color:transparent!important}

body{
  margin:0;
  color:var(--cd-text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

html.cd-noscroll,body.cd-noscroll{overflow:hidden;height:100%}

.material-symbols-rounded{
  font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24;
  font-size:24px;line-height:1;
}

/* ---------- Drawer ---------- */
aside.cd-drawer{
  position:fixed;top:0;right:0;left:auto;
  width:min(100vw,var(--cd-drawer-w)) !important;
  max-width:var(--cd-drawer-w) !important;
  height:100%;
  background:var(--cd-bg);
  box-shadow:var(--cd-shadow);
  border-left:var(--cd-line);
  transform:translateX(110%);
  opacity:0;
  will-change:transform,opacity;
  backface-visibility:hidden;
  transition:transform .6s cubic-bezier(.22,.8,.2,1),opacity .6s ease;
  display:grid;
  grid-template-rows:auto 1fr auto;
  z-index:60;
}
aside.cd-drawer.is-open{transform:translateX(0);opacity:1}

.cd-head,.cd-foot{padding-left:calc(var(--cd-pad) + env(safe-area-inset-left,0px));
                  padding-right:calc(var(--cd-pad) + env(safe-area-inset-right,0px));}
.cd-foot{padding-bottom:calc(12px + env(safe-area-inset-bottom,0px))}

/* ---------- Header ---------- */
.cd-head{
  display:flex;align-items:center;justify-content:space-between;
  padding-top:16px;padding-bottom:16px;
  border-bottom:var(--cd-line);
}
.cd-head h2{margin:0;font-size:18px;font-weight:600;letter-spacing:.2px}
.cd-icon-btn{
  background:transparent;border:1px solid transparent;
  display:inline-grid;place-items:center;width:36px;height:36px;
  border-radius:10px;cursor:pointer;color:var(--cd-text);
}
.cd-icon-btn:hover{background:#f8fafc;border-color:var(--cd-border)}
.cd-icon-btn:focus-visible{outline:2px solid #93c5fd;outline-offset:2px}

/* Back to cart (info step only) */
.cd-infohead{display:flex;align-items:center}
.cd-infohead[hidden]{display:none !important;}  /* <-- hard hide when "hidden" is present */
.cd-backlink{
  display:inline-flex;align-items:center;gap:6px;
  background:none;border:none;color:#0f172a;cursor:pointer;
  padding:6px 8px;border-radius:10px;font-weight:600;
}
.cd-backlink:hover{background:#f8fafc}
.cd-backlink:focus-visible{outline:2px solid #93c5fd;outline-offset:2px}

/* ---------- Body ---------- */
.cd-body{overflow:auto;padding:var(--cd-pad);display:grid;gap:18px}

/* ---------- Views ---------- */
.view{display:block}
.view[hidden]{display:none}
.view.active{display:block}

/* ---------- Items ---------- */
.cd-items{list-style:none;margin:0;padding:0;display:grid;gap:12px}

.cd-item{
  display:grid;grid-template-columns:80px 1fr auto;
  gap:12px;padding:12px;border:var(--cd-line);border-radius:var(--cd-radius-lg);
}

.cd-thumb{
  width:80px;height:80px;border-radius:12px;overflow:hidden;
  background:#f1f5f9;display:grid;place-items:center;border:1px solid #eef2f7;
}
.cd-thumb img{max-width:100%;max-height:100%;display:block}

.cd-meta{display:grid;gap:6px;align-content:start}
.cd-title{font-size:15px;font-weight:600;margin:0}
.cd-attrs{color:var(--cd-muted);font-size:12px}
.cd-desc{color:var(--cd-muted);font-size:12px;line-height:1.35}

/* Quantity group */
.cd-qty{
  display:inline-flex;align-items:center;background:var(--cd-qty-bg);color:var(--cd-qty-ink);
  border:1px solid var(--cd-qty-br);border-radius:999px;padding:6px;width:fit-content
}
.cd-qty button{width:24px;height:24px;border:none;background:transparent;color:var(--cd-qty-ink);
  display:grid;place-items:center;border-radius:999px;cursor:pointer;flex-shrink:0}
.cd-qty button::before{content:attr(data-glyph);font-size:16px;font-weight:500}
.cd-qty input{width:28px;min-width:28px;height:20px;line-height:20px;border:none;background:transparent;text-align:center;color:var(--cd-qty-ink);
  font-variant-numeric:tabular-nums;margin:0 10px;font-size:13px}

/* Price / remove */
.cd-pricecol{display:grid;align-content:start;justify-items:end;gap:6px}
.cd-line{font-weight:700;font-size:14px}
.cd-remove{color:var(--cd-danger);background:transparent;border:none;cursor:pointer;display:inline-flex;align-items:center;gap:6px;padding:6px 0}
.cd-remove .material-symbols-rounded{font-size:20px}

/* ---------- Empty state ---------- */
.cd-empty{text-align:center;padding:28px 12px;border:var(--cd-line);border-radius:var(--cd-radius-lg)}
.cd-empty-icon{width:64px;height:64px;border-radius:50%;background:#f1f5f9;display:grid;place-items:center;margin:0 auto 10px}
.cd-empty h3{margin:0 0 8px;font-size:16px}
.cd-empty p{margin:0 0 16px;color:var(--cd-muted);font-size:14px}
.cd-ghost-btn{display:inline-flex;align-items:center;gap:8px;border:1px dashed var(--cd-border);background:transparent;border-radius:12px;padding:10px 14px;cursor:pointer}
.cd-ghost-btn:hover{background:#f8fafc}

/* ---------- Promo ---------- */
.cd-promo{display:grid;gap:8px}
.cd-promo label{font-size:12px;color:var(--cd-muted)}
.cd-promo-row{display:grid;grid-template-columns:1fr auto;gap:8px}
.cd-promo input{border:var(--cd-line);border-radius:12px;padding:12px 14px;font:inherit;background:#fff}
.cd-apply{border:none;background:#0f172a;color:#fff;border-radius:12px;padding:12px 16px;font-weight:600;cursor:pointer}
.cd-promo-msg{margin:4px 2px 0;font-size:12px;color:var(--cd-muted);min-height:16px}

/* ---------- Summary ---------- */
.cd-summary{border:var(--cd-line);border-radius:var(--cd-radius-lg);padding:14px;display:grid;gap:10px}
.cd-row{display:flex;align-items:center;justify-content:space-between;font-size:14px}
.cd-total{font-size:16px;font-weight:800;padding-top:4px;border-top:var(--cd-line)}
.cd-note{margin:4px 0 0;font-size:12px;color:var(--cd-muted)}

/* ---------- Footer ---------- */
.cd-foot{position:sticky;bottom:0;background:var(--cd-bg);padding:12px;border-top:var(--cd-line);display:flex;align-items:center;justify-content:space-between;gap:12px}
.cd-foot-total{display:inline-flex;align-items:baseline;gap:10px}
.cd-foot-label{font-size:14px;color:var(--cd-muted)}
.cd-foot-amount{font-size:18px;font-weight:800}
.cd-primary-btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;border:none;padding:14px 18px;background:#2563eb;color:#fff;border-radius:14px;font-weight:700;cursor:pointer;box-shadow:var(--cd-shadow)}
.cd-primary-btn:focus-visible{outline:2px solid #93c5fd;outline-offset:2px}

/* PhonePe payment button styling */
.cd-primary-btn[data-state="info"]{
  background:var(--phonepe-purple);
  color:#fff;
}
.cd-primary-btn[data-state="info"]:hover{
  background:#4a1d7a;
}

/* ---------- Accordions (INFO step) ---------- */
.cd-accordions{display:grid;gap:12px}
.cd-acc{border:var(--cd-line);border-radius:14px;overflow:hidden;background:#fff}

.cd-acc-head{
  width:100%;display:flex;align-items:center;justify-content:space-between;gap:12px;
  padding:14px 16px;background:#fff;border:none;cursor:pointer;
}
.cd-acc-title{font-weight:700}
.cd-acc-icon{transition:transform .2s ease}
.cd-acc-head[aria-expanded="false"] .cd-acc-icon{transform:rotate(180deg)}

.cd-acc-body{display:none;padding:0 16px 16px}
.cd-acc-body.open{display:block}

/* Below-fields action */
.cd-actions-right{
  display:flex;align-items:center;justify-content:flex-end;
  margin-top:12px;
}
.cd-secondary-btn{
  display:inline-flex;align-items:center;justify-content:center;gap:8px;
  border:1px solid #e5e7eb;background:#fff;color:#0f172a;
  border-radius:12px;padding:10px 12px;font-weight:600;cursor:pointer;
}
.cd-secondary-btn:hover{background:#f9fafb}
.cd-secondary-btn:focus-visible{outline:2px solid #93c5fd;outline-offset:2px}

/* Form fields */
.cd-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.cd-field{display:grid;gap:6px}
.cd-field span{font-size:12px;color:var(--cd-muted)}
.cd-field input,.cd-field select{
  -webkit-appearance:none;appearance:none;
  width:100%;padding:12px 14px;border:var(--cd-line);border-radius:12px;background:#fff;font:inherit;color:var(--cd-text)
}
.cd-field input:focus,.cd-field select:focus{outline:2px solid #93c5fd;outline-offset:2px}
.cd-field input.cd-invalid,.cd-field select.cd-invalid{border-color:#fecaca;outline:2px solid #fecaca}

/* Col spanning */
.cd-col-2{grid-column:1/-1}

/* ---------- Payment Processing View ---------- */
.cd-payment-processing{
  text-align:center;
  padding:40px 20px;
  border:var(--cd-line);
  border-radius:var(--cd-radius-lg);
  background:var(--phonepe-light);
}

.cd-payment-icon{
  width:80px;
  height:80px;
  margin:0 auto 20px;
  display:grid;
  place-items:center;
  border-radius:50%;
  background:#fff;
  border:2px solid var(--phonepe-purple);
}

.cd-spinner{
  width:40px;
  height:40px;
  border:3px solid #f3f3f3;
  border-top:3px solid var(--phonepe-purple);
  border-radius:50%;
  animation:spin 1s linear infinite;
}

@keyframes spin{
  0%{transform:rotate(0deg)}
  100%{transform:rotate(360deg)}
}

.cd-payment-processing h3{
  margin:0 0 12px;
  font-size:20px;
  font-weight:700;
  color:var(--phonepe-purple);
}

.cd-payment-processing p{
  margin:0 0 24px;
  color:var(--cd-muted);
  font-size:14px;
  line-height:1.5;
}

.cd-payment-details{
  background:#fff;
  border-radius:12px;
  padding:16px;
  display:grid;
  gap:8px;
  max-width:300px;
  margin:0 auto;
}

.cd-payment-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-size:14px;
}

.cd-payment-row span{
  color:var(--cd-muted);
}

.cd-payment-row strong{
  color:var(--cd-text);
  font-weight:600;
}

/* Button loading state */
.cd-primary-btn.loading{
  pointer-events:none;
  opacity:0.7;
  position:relative;
}

.cd-primary-btn.loading::after{
  content:'';
  position:absolute;
  width:16px;
  height:16px;
  border:2px solid transparent;
  border-top:2px solid currentColor;
  border-radius:50%;
  animation:spin 1s linear infinite;
}

/* ---------------------------------
   Responsive
   --------------------------------- */
@media (max-width:768px){
  :root{--cd-drawer-w:100vw;--cd-pad:16px}
  aside.cd-drawer{width:100vw !important;max-width:100vw !important}
  .cd-item{grid-template-columns:64px 1fr auto;gap:10px;padding:10px}
  .cd-thumb{width:64px;height:64px}
  .cd-title{font-size:14px}
  .cd-attrs,.cd-desc{font-size:11px}
  .cd-foot-amount{font-size:16px}
  .cd-primary-btn{padding:12px 16px;font-size:14px}
  .cd-remove{font-size:13px}
  .cd-remove .material-symbols-rounded{font-size:18px}
  .cd-qty{padding:5px}
  .cd-qty button{width:22px;height:22px}
  .cd-qty input{width:26px;min-width:26px;height:18px;margin:0 8px}
  .cd-grid{grid-template-columns:1fr}
  
  .cd-payment-processing{padding:30px 16px}
  .cd-payment-icon{width:64px;height:64px}
  .cd-spinner{width:32px;height:32px}
}

/* Larger screens (â‰¥769px) */
@media (min-width:769px){
  :root{--cd-drawer-w:680px}
}

/* Reduced motion */
@media (prefers-reduced-motion:reduce){
  aside.cd-drawer{transition:none}
  .cd-spinner{animation:none}
}
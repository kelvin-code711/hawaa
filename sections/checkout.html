<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>
  <title>Checkout</title>

  <!-- Outfit everywhere -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="../css/checkout.css"/>
</head>
<body>

  <aside id="coDrawer" class="co-drawer" aria-hidden="true" aria-label="Cart & Checkout">
    <header class="co-head">
      <!-- Back is hidden in Cart, shown only in checkout steps -->
      <button id="backToCart" class="icon-btn" aria-label="Back to Cart" hidden>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M15 6L9 12L15 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <div class="head-spacer" aria-hidden="true"></div>
      <a href="#" class="icon-btn" aria-label="Close" id="closeDrawer">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </a>
    </header>

    <main class="co-body" id="checkoutApp">
      <div id="toast" class="toast" role="status" aria-live="polite"></div>

      <!-- ========== CART (Step 1) ========== -->
      <section class="stage cart-stage">
        <div class="card cart">
          <h2 class="cart__title">Your Cart</h2>

          <!-- Removed the header columns block per your request -->

          <ul class="cart__list" id="cartList"><!-- JS renders items --></ul>

          <!-- Coupon first, totals below it -->
          <div class="cart__footer">
            <form id="couponForm" class="cart__coupon" novalidate>
              <input id="couponInput" class="input" type="text" placeholder="Coupon code (optional)" />
              <button type="submit" class="btn-secondary">Apply</button>
            </form>

            <div class="cart__totals">
              <div class="row"><span>Subtotal</span><strong id="rowSubtotal">₹0</strong></div>
              <div class="row" id="rowDiscount" hidden><span>Discount</span><strong id="rowDiscountVal">−₹0</strong></div>
              <div class="row"><span>Shipping</span><strong id="rowShipping">₹0</strong></div>
              <div class="row small"><span>GST (18%) included</span><span id="rowGSTVal">₹0</span></div>
              <div class="row total"><span>Total</span><strong id="rowTotal">₹0</strong></div>
            </div>

            <div class="cart__trust">
              <span class="mini-badge">Free delivery ₹3,000+</span>
              <span class="mini-badge">7-day returns</span>
              <span class="mini-badge">Secure payments</span>
            </div>
          </div>
        </div>
      </section>

      <!-- ========== CHECKOUT (after Next) ========== -->
      <section class="stage checkout-stage" aria-hidden="true">
        <!-- CUSTOMER -->
        <section class="step card is-open" data-stepkey="customer">
          <button class="step__head" data-step="customer" aria-expanded="true" aria-controls="panel-customer">
            <span class="step__title">Customer Info</span>
            <span class="chev" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none">
                <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </span>
          </button>
          <div class="step__divider" aria-hidden="true"></div>

          <div class="step__body" id="panel-customer" role="region" aria-labelledby="customer">
            <div class="grid">
              <label class="field" id="fieldName"><span>Full Name</span><input id="fullName" class="input" type="text" autocomplete="name" placeholder="Your full name" required /><p class="error" id="errName"></p></label>
              <label class="field" id="fieldMobile"><span>Mobile Number</span><input id="mobile" class="input" type="tel" inputmode="numeric" pattern="[0-9]*" maxlength="10" placeholder="10-digit number" autocomplete="tel" required /><p class="error" id="errMobile"></p></label>
              <label class="field span-2" id="fieldEmail"><span>Email Address <em>(optional)</em></span><input id="email" class="input" type="email" autocomplete="email" placeholder="For invoice + tracking" /><p class="error" id="errEmail"></p></label>
            </div>

            <div class="actions">
              <div class="actions-right">
                <button class="btn next-btn" id="nextCustomer" type="button">Save & Continue</button>
              </div>
            </div>
          </div>
        </section>

        <!-- ADDRESS -->
        <section class="step card is-locked" data-stepkey="shipaddr">
          <button class="step__head" data-step="shipaddr" aria-expanded="false" aria-controls="panel-shipaddr" disabled>
            <span class="step__title">Shipping Address</span>
            <span class="chev" aria-hidden="true"><svg viewBox="0 0 24 24" width="20" height="20" fill="none"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
          </button>
          <div class="step__divider" aria-hidden="true"></div>

          <div class="step__body" id="panel-shipaddr" role="region" aria-labelledby="shipaddr" hidden>
            <div class="grid">
              <label class="field" id="fieldPincode"><span>Pincode</span><input id="pincode" class="input" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="6" placeholder="6-digit pincode" required /><p class="error" id="errPincode"></p></label>
              <label class="field"><span>City</span><input id="city" class="input" type="text" placeholder="Auto-filled from pincode" /></label>
              <label class="field"><span>State</span><input id="state" class="input" type="text" placeholder="Auto-filled from pincode" /></label>
              <label class="field span-2" id="fieldAddr1"><span>Address Line 1</span><input id="addr1" class="input" type="text" placeholder="House, Building, Street" required /><p class="error" id="errAddr1"></p></label>
              <label class="field span-2"><span>Address Line 2 <em>(optional)</em></span><input id="addr2" class="input" type="text" placeholder="Landmark" /></label>
            </div>

            <label class="checkbox"><input id="sameBilling" type="checkbox" checked /><span>Billing same as shipping</span></label>

            <div id="billingBlock" class="billing-block" hidden>
              <h3 class="billing-title">Billing Address</h3>
              <div class="grid">
                <label class="field" id="fieldBPincode"><span>Pincode</span><input id="bpincode" class="input" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="6" placeholder="6-digit pincode" /><p class="error" id="errBPincode"></p></label>
                <label class="field"><span>City</span><input id="bcity" class="input" type="text" placeholder="City" /></label>
                <label class="field"><span>State</span><input id="bstate" class="input" type="text" placeholder="State" /></label>
                <label class="field span-2" id="fieldBAddr1"><span>Address Line 1</span><input id="baddr1" class="input" type="text" placeholder="House, Building, Street" /><p class="error" id="errBAddr1"></p></label>
                <label class="field span-2"><span>Address Line 2 <em>(optional)</em></span><input id="baddr2" class="input" type="text" placeholder="Landmark" /></label>
              </div>
            </div>

            <div class="actions">
              <div class="actions-right">
                <button class="btn next-btn" id="nextShip" type="button">Save & Continue</button>
              </div>
            </div>
          </div>
        </section>

        <!-- PAYMENT (directly after address; Shipping Method removed) -->
        <section class="step card is-locked" data-stepkey="payment">
          <button class="step__head" data-step="payment" aria-expanded="false" aria-controls="panel-payment" disabled>
            <span class="step__title">Payment</span>
            <span class="chev" aria-hidden="true"><svg viewBox="0 0 24 24" width="20" height="20" fill="none"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
          </button>
          <div class="step__divider" aria-hidden="true"></div>

          <div class="step__body" id="panel-payment" role="region" aria-labelledby="payment" hidden>
            <div class="tabs" id="paymentTabs" role="tablist" aria-label="Payment methods">
              <button class="tab is-active" role="tab" aria-selected="true" data-pay="upi">✅ UPI (recommended)</button>
              <button class="tab" role="tab" aria-selected="false" data-pay="card">Card / Netbanking / Wallets</button>
              <button class="tab" role="tab" aria-selected="false" data-pay="cod">COD (₹30 fee, OTP verify)</button>
            </div>
            <div class="tab-panels">
              <div class="panel" data-panel="upi">
                <p class="muted">Pay via Google Pay / PhonePe / BHIM. Scan QR or use intent link:</p>
                <div class="upi-box">
                  <div class="qr-placeholder" aria-hidden="true">QR</div>
                  <div class="upi-actions">
                    <a id="upiIntent" class="btn" href="#" data-no-router>Pay with UPI Intent</a>
                    <p class="muted small">UPI ID: <strong>hawaa@upi</strong> • Name: <strong>Hawaa</strong></p>
                  </div>
                </div>
              </div>
              <div class="panel" data-panel="card" hidden>
                <p class="muted">You’ll be redirected to Cashfree for cards, netbanking, or wallets.</p>
                <div class="gateway-box">
                  <div class="fake-input">Cardholder Name</div>
                  <div class="fake-input">Card Number</div>
                  <div class="fake-input">MM/YY &nbsp;&nbsp; CVV</div>
                  <p class="muted small">This is a placeholder UI. Actual entry happens on the gateway page.</p>
                </div>
              </div>
              <div class="panel" data-panel="cod" hidden>
                <p class="muted">Cash on Delivery has a ₹30 fee. We’ll verify your mobile with OTP.</p>
                <div class="cod-box">
                  <div class="otp-row">
                    <button id="sendOTP" type="button" class="btn-secondary">Send OTP</button>
                    <input id="otpInput" class="input" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="6" placeholder="Enter 6-digit OTP" />
                    <button id="verifyOTP" type="button" class="btn-secondary">Verify</button>
                  </div>
                  <p id="otpStatus" class="muted small">OTP not sent.</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="card trust">
          <span>🔒 Payments secured by <strong>Cashfree</strong></span>
          <span>📦 Free returns within 7 days</span>
          <a class="wa" href="https://wa.me/919999999999" target="_blank" rel="noopener">📞 Need help? WhatsApp us</a>
        </section>

        <div style="height:84px"></div>
      </section>
    </main>

    <!-- Sticky bar (no Cancel) -->
    <footer class="paybar" aria-live="polite">
      <div class="paybar__left">
        <span class="muted">Total</span>
        <strong id="stickyTotal">₹0</strong>
      </div>
      <div class="paybar__right">
        <button id="primaryCTA" class="btn" disabled aria-disabled="true">Next</button>
      </div>
    </footer>
  </aside>

  <script src="../js/checkout.js"></script>
</body>
</html>
